<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="text-center mt-5">
      <div id="start-prompt">
        <button id="start" class="btn btn-primary">Start Quiz!</button>
        <h1>Welcome to the GOT Quiz Game!</h1>
      </div>

      <div id="question-container" style="display: none">
        <h2 id="question-text">Question 1</h2>
        <div id="answers"></div>

        <div id="answer-prompt"></div>
      </div>
    </div>

    <div class="timer">Time: <span id="time"></span></div>

    <script>
      const startBtn = document.querySelector("#start");
      const startPrompt = document.querySelector("#start-prompt");
      let questionContainer = document.getElementById("question-container");
      const questionText = document.querySelector("#question-text");
      const answerDiv = document.querySelector("#answers");
      let time = document.querySelector("#time");
      const questions = [
        {
          text:
            "What punishment did Arya have to endure after stealing from the Many-Faced God?",
          answers: ["Blindness", "Memory loss", "Paralysis", "Loss of hearing"],
          correctIndex: 0
        },
        {
          text: "What is the name of the direwolf that Jon Snow adopted and raised?",
          answers: ["Nymeria", "Ghost", "Lady", "Grey Wind"],
          correctIndex: 1
        },
        // {
        //     text:"In addition to Valyrian Steel, what is the only other substance that can kill a White Walker?",
        //     answers: ["Lava", "Fire arrow to the heart", "Dragonglass", "Drowning"]
        //     correctIndex: 2
        // },
        {
            text:"What does Bran become?",
            answers: ["Two-Headed Dog", "Three-Eyed Raven", "A Dragon", "A White Walker"],
            correctIndex:1
        },
        {
            text:"Which musical artist made a cameo in Game of Thrones?",
            answers:["Ed Sheeran", "Blake Shelton", "Lady Gaga", "Paul McCartney"],
            correctIndex: 0
        },
        {
            text:"Which of the following names does not belong to Daenerys' dragons?",
            answers:["Drogon", "Viserion", "Venim", "Rhaegal"],
            correctIndex: 0
        },
        {
            text:"What does the phrase Valar Morghulis mean?",
            answers:["All men must serve", "All men must eat", "All men must bend the kneel", "All men must die"],
            correctIndex: 4
        },
        {
            text:"Who did Brienne of Tarth pledge her sword to?",
            answers:["Jamie Lannister", "Arya Stark", "Sansa Stark", "Catelyn Stark"],
            correctIndex: 4
        },
        {
            text:"What was the name of Arya's sword?",
            answers:["Pencil", "Oathkeeper", "Needle", "Fire"],
            correctIndex: 3
        }
      ];

      let timeRemaining = questions.length * 15;
      let questionIndex = 0;
      let timeId = 0;
      // register a click event handler
      startBtn.addEventListener("click", function (e) {
        startPrompt.style.display = "none";
        questionContainer.style.display = "block";
        //created variable to store current question
        displayQuestion();

        let choice = document.querySelectorAll(".choice");
        for (let i = 0; i < choice.length; i++) {
          choice[i].addEventListener("click", function (e) {
            e.preventDefault();

            var correctAnswerIndex = questions[questionIndex].correctIndex;
            var correctAnswer =
              questions[questionIndex].answers[correctAnswerIndex];
            var userAnswer = this.textContent;
            if (userAnswer === correctAnswer) {
              document.querySelector("#answer-prompt").textContent = "Correct";

            } else {
              document.querySelector("#answer-prompt").textContent =
                "Incorrect";
                timeRemaining = timeRemaining - 10

              //else remove 10 seconds from time, move to next question
            }
            clearInterval(timeId)


            //moves to next question
            questionIndex++;
            //pauses timer and displays answer right/wrong
            setTimeout(displayQuestion, 3000)
            //displays next question

          });
        }

      });
      function displayQuestion() {
        document.querySelector("#answer-prompt").textContent = ""
        timeId = setInterval(countdown, 1000);

        const currentQuestion = questions[questionIndex];
        //set the text content
        questionText.textContent = currentQuestion.text;
        answerDiv.textContent = "";
        //create a button for each answer
        for (let i = 0; i < questions[questionIndex].answers.length; i++) {
          const answer = currentQuestion.answers[i];
          const btn = document.createElement("button");
          btn.setAttribute("class", "btn btn-primary choice");
          btn.textContent = answer;
          answerDiv.appendChild(btn);
        }
      }
      // every second, takes one off countdown
      function countdown() {
        timeRemaining--;
        time.textContent = timeRemaining;
        if (timeRemaining === 0) {
          clearInterval(timeId);
        }
      }
    </script>
  </body>
</html>
